<div class="bg-base-100 rounded-xl shadow-md border semantic-neutral-border">
    <!-- Course Type Tabs -->
    <div class="border-b border-base-content/20">
        <nav class="flex -mb-px space-x-8 px-4 overflow-x-auto">
            <button
                x-show="getTypeCount('RTG') > 0"
                @click="activeCategory = 'RTG'"
                :class="{'semantic-blue-text font-medium': activeCategory === 'RTG', 'border-transparent text-base-content/60 hover:text-base-content hover:border-base-content/30': activeCategory !== 'RTG'}"
                :style="(getTypeCount('RTG') > 0 && activeCategory === 'RTG') ? 'border-bottom-color: var(--blue-text)' : ''"
                class="py-4 px-1 border-b-2 text-sm transition-colors whitespace-nowrap duration-200 ease-in-out focus:outline-none">
                Ratings (<span x-text="getTypeCount('RTG')"></span>)
            </button>

            <button
                x-show="(getTypeCount('EDMT') + getTypeCount('FAM')) > 0"
                @click="activeCategory = 'EDMT_FAM'"
                :class="{'semantic-blue-text font-medium': activeCategory === 'EDMT_FAM', 'border-transparent text-base-content/60 hover:text-base-content hover:border-base-content/30': activeCategory !== 'EDMT_FAM'}"
                :style="((getTypeCount('EDMT') + getTypeCount('FAM')) > 0 && activeCategory === 'EDMT_FAM') ? 'border-bottom-color: var(--blue-text)' : ''"
                class="py-4 px-1 border-b-2 text-sm transition-colors whitespace-nowrap duration-200 ease-in-out focus:outline-none">
                Endorsements & Familiarisation (<span
                    x-text="getTypeCount('EDMT') + getTypeCount('FAM')"></span>)
            </button>

            <button
                x-show="getTypeCount('GST') > 0"
                @click="activeCategory = 'GST'"
                :class="{'semantic-blue-text font-medium': activeCategory === 'GST', 'border-transparent text-base-content/60 hover:text-base-content hover:border-base-content/30': activeCategory !== 'GST'}"
                :style="(getTypeCount('GST') > 0 && activeCategory === 'GST') ? 'border-bottom-color: var(--blue-text)' : ''"
                class="py-4 px-1 border-b-2 text-sm transition-colors whitespace-nowrap duration-200 ease-in-out focus:outline-none">
                Visitor (<span x-text="getTypeCount('GST')"></span>)
            </button>

            <button
                x-show="getTypeCount('RST') > 0"
                @click="activeCategory = 'RST'"
                :class="{'semantic-blue-text font-medium': activeCategory === 'RST', 'border-transparent text-base-content/60 hover:text-base-content hover:border-base-content/30': activeCategory !== 'RST'}"
                :style="(getTypeCount('RST') > 0 && activeCategory === 'RST') ? 'border-bottom-color: var(--blue-text)' : ''"
                class="py-4 px-1 border-b-2 text-sm transition-colors whitespace-nowrap duration-200 ease-in-out focus:outline-none">
                Roster (<span x-text="getTypeCount('RST')"></span>)
            </button>
        </nav>
    </div>

    <!-- Course Selection Pills -->
    <div class="px-4 py-3 overflow-x-auto">
        <div x-show="activeCategory === 'RTG'" class="flex flex-wrap gap-2 py-1">
            <template
                x-for="course in getCoursesByType('RTG').sort((a, b) => a.position.localeCompare(b.position))"
                :key="course.id">
                <button
                    @click="selectCourse(course)"
                    :class="{'semantic-blue-bg semantic-blue-border semantic-blue-text': selectedCourseId === course.id, 'bg-base-100 semantic-neutral-border text-base-content hover:bg-base-200': selectedCourseId !== course.id}"
                    class="course-pill inline-flex items-center px-3 py-1.5 border rounded-full text-sm font-medium transition-colors duration-200 ease-in-out">
                    <span x-text="course.name"></span>
                </button>
            </template>
        </div>

        <div x-show="activeCategory === 'EDMT_FAM'" class="flex flex-wrap gap-2 py-1">
            <template
                x-for="course in [...getCoursesByType('EDMT'), ...getCoursesByType('FAM')].sort((a, b) => a.position.localeCompare(b.position))"
                :key="course.id">
                <button
                    @click="selectCourse(course)"
                    :class="{'semantic-blue-bg semantic-blue-border semantic-blue-text': selectedCourseId === course.id, 'bg-base-100 semantic-neutral-border text-base-content hover:bg-base-200': selectedCourseId !== course.id}"
                    class="course-pill inline-flex items-center px-3 py-1.5 border rounded-full text-sm font-medium transition-colors duration-200 ease-in-out">
                    <span x-text="course.name"></span>
                </button>
            </template>
        </div>

        <div x-show="activeCategory === 'GST'" class="flex flex-wrap gap-2 py-1">
            <template
                x-for="course in getCoursesByType('GST').sort((a, b) => a.position.localeCompare(b.position))"
                :key="course.id">
                <button
                    @click="selectCourse(course)"
                    :class="{'semantic-blue-bg semantic-blue-border semantic-blue-text': selectedCourseId === course.id, 'bg-base-100 semantic-neutral-border text-base-content hover:bg-base-200': selectedCourseId !== course.id}"
                    class="course-pill inline-flex items-center px-3 py-1.5 border rounded-full text-sm font-medium transition-colors duration-200 ease-in-out">
                    <span x-text="course.name"></span>
                </button>
            </template>
        </div>

        <div x-show="activeCategory === 'RST'" class="flex flex-wrap gap-2 py-1">
            <template
                x-for="course in getCoursesByType('RST').sort((a, b) => a.position.localeCompare(b.position))"
                :key="course.id">
                <button
                    @click="selectCourse(course)"
                    :class="{'semantic-blue-bg semantic-blue-border semantic-blue-text': selectedCourseId === course.id, 'bg-base-100 semantic-neutral-border text-base-content hover:bg-base-200': selectedCourseId !== course.id}"
                    class="course-pill inline-flex items-center px-3 py-1.5 border rounded-full text-sm font-medium transition-colors duration-200 ease-in-out">
                    <span x-text="course.name"></span>
                </button>
            </template>
        </div>
    </div>
</div>